<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Clean Architecture in Node.js</title>
<meta name="author" content="Sergio Ben√≠tez"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/theme/moon.css" id="theme"/>

</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Clean Architecture in Node.js</h1><p class="subtitle"></p>
<h2 class="author">Sergio Ben√≠tez</h2>
</section>
<section id="sec-table-of-contents"><div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#/slide-org6111ed1">üí≠ Working With Legacy Projects</a></li>
<li><a href="#/slide-org49f7ae3">üñºÔ∏è‚ÄçThe Clean Architecture</a></li>
<li><a href="#/slide-org9f2808c">‚úã The Clean Architecture my understanding</a></li>
<li><a href="#/slide-orgaff6098">ü§ì Demo</a></li>
<li><a href="#/slide-orgd3c9432">üìù Recap</a></li>
<li><a href="#/slide-org908e804">ü•° Takeaways</a></li>
<li><a href="#/slide-orgba3550f">üìé Resources</a></li>
<li><a href="#/slide-orgb31147c">üôá Thanks!</a></li>
</ul>
</div>
</div>
</section>


<section>
<section id="slide-org6111ed1" data-background="#123456">
<h2 id="org6111ed1">üí≠ Working With Legacy Projects</h2>
<p>
Learnings of software architecture and how a front end can do his initial steps in the backend world.
</p>

</section>
</section>
<section>
<section id="slide-org49f7ae3">
<h2 id="org49f7ae3">üñºÔ∏è‚ÄçThe Clean Architecture</h2>

<div id="org12dae15" class="figure">
<p><img src="./images/01-clean-architecture.jpg" alt="01-clean-architecture.jpg" />
</p>
<p><span class="figure-number">Figure 1: </span>Uncle Bob Clean architecture</p>
</div>

</section>
</section>
<section>
<section id="slide-org9f2808c">
<h2 id="org9f2808c">‚úã The Clean Architecture my understanding</h2>
<div class="outline-text-2" id="text-org9f2808c">
</div>
</section>
<section id="slide-orgd6a0265">
<h3 id="orgd6a0265">Fundamental blocks of the system</h3>

<div id="org927caff" class="figure">
<p><img src="./images/02-fundamental-blocks.jpg" alt="02-fundamental-blocks.jpg" />
</p>
<p><span class="figure-number">Figure 2: </span>Fundamental blocks of the system</p>
</div>


<aside class="notes">
<ol>
<li>Whatever type that makes it possible to run an <b>user interface</b></li>
<li>The system <b>business logic/application core</b> which is used by the user interface to actually makes things happen</li>
<li><b>Infrastructure</b> code, that connect our applicaton core to external tool</li>

</ol>

</aside>

</section>
<section id="slide-orgce30e4f">
<h3 id="orgce30e4f">Flow of control</h3>

<div id="orgf0bfc4b" class="figure">
<p><img src="./images/03-flow-of-control.jpg" alt="03-flow-of-control.jpg" />
</p>
<p><span class="figure-number">Figure 3: </span>Flow of control</p>
</div>

</section>
<section id="slide-orgc9bc2d5">
<h3 id="orgc9bc2d5">Tools</h3>

<div id="org129c080" class="figure">
<p><img src="./images/04-tools.jpg" alt="04-tools.jpg" />
</p>
<p><span class="figure-number">Figure 4: </span>Tools</p>
</div>

<aside class="notes">
<p>
It might feel weird to put a CLI console in the same &ldquo;bucket&rdquo; as a database engine, and although they have differente purposes, there are in fact tools used by the application.
</p>

<p>
The key difference is that, while the CLI console are used to <b>tell our application to do something</b>, the database enfin is <b>told by our application to do something</b>.
</p>

</aside>

</section>
<section id="slide-org2a65d9f">
<h4 id="org2a65d9f">Adapters</h4>
<aside class="notes">
<p>
The code units that connect the tools to the application core are called adapters.
</p>

<p>
The adapters taht <b>tell</b> our application to do something are called <i>driving adapter</i>, while the ones that are <b>told</b> by our application to do something are called <i>driven adapters</i>.
</p>

</aside>

</section>
<section id="slide-org7e0be26">
<h4 id="org7e0be26">Ports</h4>
<aside class="notes">
<p>
The adapters are no randomly created; they are created to fit a very specific entry point to the application core, a <b>port</b>.
</p>

<p>
A port <b>is nothing more than a specification</b> of how the tool can use or used by the application core.
</p>

<p>
It is important to note that the ports (<b>interfaces</b>) belong inside the business logic, while adapter belong outside.
</p>

</aside>

</section>
<section id="slide-org9c9a626">
<h4 id="org9c9a626">Driver Adapters</h4>

<div id="org2c44b00" class="figure">
<p><img src="./images/05-driver-adapters.jpg" alt="05-driver-adapters.jpg" />
</p>
<p><span class="figure-number">Figure 5: </span>Driver Adapters</p>
</div>


<aside class="notes">
<p>
The driver adapters <b>wrap</b> around a port and use it to tell the application core what to do. <b>They translate whatever comes from a delivery mechanism into a method call in the app core</b>
</p>

</aside>

</section>
<section id="slide-orga6702c2">
<h4 id="orga6702c2">Driven Adapters</h4>

<div id="org3e1acd5" class="figure">
<p><img src="./images/06-driven-adapters.jpg" alt="06-driven-adapters.jpg" />
</p>
<p><span class="figure-number">Figure 6: </span>Driven Adapters</p>
</div>


<aside class="notes">
<p>
The driven adapters <b>implement</b> a port and are then injected into application core, wherever the port is required
</p>

</aside>

</section>
<section id="slide-org2133d62">
<h4 id="org2133d62">Inversion of control</h4>

<div id="org9e6f5e3" class="figure">
<p><img src="./images/07-inversion-of-control.jpg" alt="07-inversion-of-control.jpg" />
</p>
<p><span class="figure-number">Figure 7: </span>Inversion of control</p>
</div>

<aside class="notes">
<p>
A characteristic to note about this pattern is that the adapters depend on a specific tool and a specific port (by implementing an interface). But our business logic only depends on the port (interface), which is designed to fit the business logic needs, so it doesn‚Äôt depend on a specific adapter or tool.
</p>

<p>
i.e. the thirection of dependencies is towards the centre, it is the <b>inversion of control principle at the architectural level</b>
</p>

</aside>

</section>
<section id="slide-org5d6699d">
<h3 id="org5d6699d">Application Layer</h3>

<div id="orgee0d6e2" class="figure">
<p><img src="./images/08-app-layer.jpg" alt="08-app-layer.jpg" />
</p>
<p><span class="figure-number">Figure 8: </span>Inversion of control</p>
</div>

<aside class="notes">
<p>
The Onion Architecture picks up the DDD layers and incorporates them into the Ports &amp; Adapters Architecture. Those layers intended to bring some organisation to the business logic, the interior of the Ports &amp; Adapters ‚Äúhexagon‚Äù, and just like in Ports &amp; Adapters, the dependencies direction is towards the centre.
</p>

</aside>

<aside class="notes">
<p>
The use cases are the processes that can triggered in our <i>application core</i> by one or several User Interfaces in our application.
</p>

<p>
e.g. Several UIs (applications) could trigger use cases that can be specific to one of them or reused by several of them:
</p>

<ul>
<li>App UI</li>
<li>Admin UI</li>
<li>CLI UI</li>

</ul>

<p>
The use cases are defined in the <i>application layer</i>.
</p>

</aside>

<ul class="org-ul">
<li><a id="org746f996"></a>Application Services<br />
<ol>
<li>Use a repository to find on or several entities;</li>
<li>Tell those entities to do some domain logic;</li>
<li>Use the repository to persist entities again, effectively saving the data changes.</li>

</ol>
</li>


<li><a id="orgce46b0f"></a>Command Handlers<br />
<ol>
<li>Contain the actual logic to perform the use case;</li>
<li>Wire pieces in the architecture receiveing a command or trigerring a logic in the application Service.</li>

</ol>
</li>

<li><a id="org269dc60"></a>Application Event<br />
<p>
Represent the outcome of a use case.
</p>
</li>
</ul>

</section>
<section id="slide-orge2eb459">
<h4 id="orge2eb459">Domain Layer</h4>

<div id="org5dcee64" class="figure">
<p><img src="./images/09-domain-layer.jpg" alt="09-domain-layer.jpg" />
</p>
<p><span class="figure-number">Figure 9: </span>Domain layer</p>
</div>

<aside class="notes">
<p>
The objects in the domain layer contain the data an the logic to manipulate that data, that is specific to the domain itself and it is independent of the business process that trigger the logic adn the application layer.
</p>

</aside>

<ul class="org-ul">
<li><a id="org5682aaf"></a>Domain Services<br />
<aside class="notes">
<p>
The role of the <i>domain service</i> is receive a set of entities and perfomr business logic on them. A domain service belongs to the domain layer and consume domain models.
</p>

</aside>
</li>

<li><a id="orgd6f60e5"></a>Domain Model<br />
<aside class="notes">
<p>
In the centre, the domain model contains the bussiness objects that represent something in the domain (e.g. entities, value objects, enums, etc.)
</p>

</aside>
</li>

<li><a id="org901e2d6"></a>Domain Events<br />
<aside class="notes">
<p>
Inside domain models also lives the domain events. These events are triggered when a specific set of data changes and they carry those changes with theme.
</p>

</aside>
</li>
</ul>

</section>
<section id="slide-org9fb25c9">
<h4 id="org9fb25c9">Components</h4>

<div id="orgdef3d80" class="figure">
<p><img src="./images/10-component.jpg" alt="10-component.jpg" />
</p>
<p><span class="figure-number">Figure 10: </span>Component</p>
</div>

<aside class="notes">
<p>
So far we have been segregating the code based on layers, but that is the fine-grained code segregation.The coarse-grained segregation of code is at least as important and it‚Äôs about segregating the code according to sub-domains and bounded contexts, following Robert C. Martin ideas expressed in screaming architecture.
</p>

</aside>

<ul class="org-ul">
<li><a id="orgbca448b"></a>Package by layer<br />
<div id="orgcc456ed" class="figure">
<p><img src="./images/11-package-by-layer.jpg" alt="11-package-by-layer.jpg" />
</p>
<p><span class="figure-number">Figure 11: </span>Package by layer</p>
</div>
</li>

<li><a id="orgf2bb682"></a>Package by feature<br />
<div id="orgefffe6a" class="figure">
<p><img src="./images/12-package-by-feature.jpg" alt="12-package-by-feature.jpg" />
</p>
<p><span class="figure-number">Figure 12: </span>Package by feature</p>
</div>
</li>

<li><a id="org5f4d516"></a>Package by component<br />
<div id="orge16b884" class="figure">
<p><img src="./images/13-package-by-component.jpg" alt="13-package-by-component.jpg" />
</p>
<p><span class="figure-number">Figure 13: </span>Package by component</p>
</div>
</li>
</ul>

</section>
</section>
<section>
<section id="slide-orgaff6098">
<h2 id="orgaff6098">ü§ì Demo</h2>

</section>
</section>
<section>
<section id="slide-orgd3c9432">
<h2 id="orgd3c9432">üìù Recap</h2>
<div class="outline-text-2" id="text-orgd3c9432">
</div>
</section>
<section id="slide-org7711cfb">
<h3 id="org7711cfb">Explicit Architecture</h3>

<div id="orgc06e02a" class="figure">
<p><img src="./images/14-explicit-architecture.png" alt="14-explicit-architecture.png" />
</p>
<p><span class="figure-number">Figure 14: </span>Explicit architecture</p>
</div>

</section>
<section id="slide-org6f49246">
<h3 id="org6f49246">Dependencies Go Downwards</h3>

<div id="org677a95b" class="figure">
<p><img src="./images/15-downwards.png" alt="15-downwards.png" />
</p>
<p><span class="figure-number">Figure 15: </span>Dependencies go downwards</p>
</div>


</section>
</section>
<section>
<section id="slide-org908e804">
<h2 id="org908e804">ü•° Takeaways</h2>
<div class="outline-text-2" id="text-org908e804">
</div>
</section>
<section id="slide-orgeeec812">
<h3 id="orgeeec812">Dependencies go inwards</h3>

<div id="orgfe3a299" class="figure">
<p><img src="./images/16-dependencies.png" alt="16-dependencies.png" />
</p>
<p><span class="figure-number">Figure 16: </span>Dependencies go inwards</p>
</div>


</section>
<section id="slide-org3fe207d">
<h3 id="org3fe207d">Plans are worthless, but planning is everything.</h3>
<aside class="notes">
<p>
The goal, as always, is to have a codebase that is loosely coupled and high cohesive, so that changes are easy, fast and safe to make.
</p>

</aside>

</section>
<section id="slide-org5cc065f">
<h3 id="org5cc065f">The map is not the territory</h3>
<aside class="notes">
<p>
Meaning that these are just guidelines! The application is the territory, the reality, the concrete use case where we need to apply our knowledge, and that is what will define what the actual architecture will look like!
</p>

<p>
We need to understand all these patterns, but we also always need to think and understand exactly what our application needs, how far should we go for the sake of decoupling and cohesiveness. This decision can depend on plenty of factors, starting with the project functional requirements, but can also include factors like the time-frame to build the application, the lifespan of the application, the experience of the development team, and so on.
</p>

</aside>

</section>
</section>
<section>
<section id="slide-orgba3550f">
<h2 id="orgba3550f">üìé Resources</h2>
<ul>
<li><a href="https://www.freecodecamp.org/news/mvc-architecture-what-is-a-model-view-controller-framework/">MVC Architecture</a> by Jessica Wilkins</li>
<li><a href="https://mannhowie.com/clean-architecture-node?utm_source=pocket_saves">Clean Architecture NodeJS build a REST API</a> by Howie Mann</li>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/?source=post_page-----19cab9e93be7--------------------------------">DDD, Hexagonal, Onion, Clean, CQRS, &#x2026; How to put all together</a>, by Herberto Graca</li>

</ul>

</section>
</section>
<section>
<section id="slide-orgb31147c">
<h2 id="orgb31147c">üôá Thanks!</h2>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/markdown.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/plugin/zoom/zoom.js"></script>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/plugin/notes/notes.js"></script>


<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
plugins: [RevealMarkdown, RevealZoom, RevealNotes],
slideNumber:true
});

</script>
</body>
</html>
